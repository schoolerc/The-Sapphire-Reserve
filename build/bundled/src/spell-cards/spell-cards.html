<html><head><link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="/bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="/bower_components/paper-item/paper-item.html">
<link rel="import" href="/bower_components/paper-input/paper-input.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">
<link rel="import" href="/bower_components/neon-animation/neon-animatable-behavior.html">
<link rel="import" href="/bower_components/neon-animation/animations/fade-in-animation.html">
<link rel="import" href="/bower_components/neon-animation/animations/fade-out-animation.html">
<link rel="import" href="/bower_components/iron-list/iron-list.html">
<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="/bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="/bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="/bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="spell-card.html">
</head><body><dom-module id="spell-cards">
    <template>
        <style include="iron-flex iron-flex-alignment"></style>
        <style>
            :host {
                display: flex;
                flex-direction: column;
            }

            iron-list {
                flex: 1 1 auto;
            }

            div > paper-input {
                margin-right: 5px;
                margin-left: 5px;
                flex-grow: 1;
            }

            div > paper-dropdown-menu {
                margin-right: 5px;
                margin-left: 5px;
                flex-grow: 1;
            }
        </style>
        <paper-toolbar>
            <paper-icon-button icon="menu" paper-drawer-toggle="" on-tap="toggleDrawer"></paper-icon-button>
            <span class="title">D&amp;D 5E Spell Cards</span>
            <paper-icon-button icon="search" on-tap="toggleSearch"></paper-icon-button>
        </paper-toolbar>
        <div>
            <iron-collapse>
                <div>
                    <div class="layout horizontal wrap">
                        <paper-dropdown-menu label="Class">
                            <paper-listbox multi="" attr-for-selected="name" class="dropdown-content" selected-values="{{playerClasses}}">
                                <paper-item name="Bard">Bard</paper-item>
                                <paper-item name="Cleric">Cleric</paper-item>
                                <paper-item name="Druid">Druid</paper-item>
                                <paper-item name="Paladin">Paladin</paper-item>
                                <paper-item name="Ranger">Ranger</paper-item>
                                <paper-item name="Sorcerer">Sorcerer</paper-item>
                                <paper-item name="Warlock">Warlock</paper-item>
                                <paper-item name="Wizard">Wizard</paper-item>
                            </paper-listbox>
                        </paper-dropdown-menu>
                        <paper-dropdown-menu label="School">
                            <paper-listbox multi="" class="dropdown-content" attr-for-selected="name" selected-values="{{spellSchools}}">
                                <paper-item name="Abjuration">Abjuration</paper-item>
                                <paper-item name="Conjuration">Conjuration</paper-item>
                                <paper-item name="Divination">Divination</paper-item>
                                <paper-item name="Enchantment">Enchantment</paper-item>
                                <paper-item name="Evocation">Evocation</paper-item>
                                <paper-item name="Illusion">Illusion</paper-item>
                                <paper-item name="Necromancy">Necromancy</paper-item>
                                <paper-item name="Transmutation">Transmutation</paper-item>
                            </paper-listbox>
                        </paper-dropdown-menu>
                        <paper-dropdown-menu label="Level">
                            <paper-listbox multi="" class="dropdown-content" attr-for-selected="level" selected-values="{{spellLevels}}">
                                <paper-item level="0">Cantrip</paper-item>
                                <paper-item level="1">1st-level</paper-item>
                                <paper-item level="2">2nd-level</paper-item>
                                <paper-item level="3">3rd-level</paper-item>
                                <paper-item level="4">4th-level</paper-item>
                                <paper-item level="5">5th-level</paper-item>
                                <paper-item level="6">6th-level</paper-item>
                                <paper-item level="7">7th-level</paper-item>
                                <paper-item level="8">8th-level</paper-item>
                                <paper-item level="9">9th-level</paper-item>
                            </paper-listbox>
                        </paper-dropdown-menu>
                        <paper-input style="width:206px" label="Name" value="{{spellName}}"></paper-input>
                    </div>
                </div>
            </iron-collapse>
        </div>
        <iron-list items="[[filteredSpells]]">
            <template>
                <spell-card data="[[item]]"></spell-card>
            </template>
        </iron-list>
    </template>

    <script>Polymer({is:"spell-cards",properties:{playerClasses:{type:Array},spellLevels:{type:Array},spellSchools:{type:Array},spellName:{type:String,notify:!0,observer:"applyFilters"},spells:{type:Array,notify:!0,value:function(){return[]},observer:"applyFilters"},filteredSpells:{type:Array}},observers:["applyFilters(spellSchools.*)","applyFilters(spellLevels.*)","applyFilters(playerClasses.*)"],components:function(e){var l=e.components.join(", ");return void 0!==e.material&&(l+=" ("+e.material+")"),l},spellLevelSchoolDescription:function(e){var l="";return l=0==e.level?e.school+" Cantrip":1==e.level?"1st-level "+e.school:2==e.level?"2nd-level "+e.school:3==e.level?"3rd-level "+e.school:e.level+"th-level "+e.school,e.ritual&&(l+=" (ritual)"),l},ready:function(){},applyFilters:function(e){for(var l=[],s=0;s<this.spells.length;s++){var t=this.spells[s];this.filterSpell(t)&&l.push(t)}this.set("filteredSpells",l)},clearFilters:function(e){this.spellLevels=[],this.playerClasses=[],this.spellSchools=[],this.spellName="",this.$.spellList.render()},filterSpell:function(e){var l=!0;void 0!==this.playerClasses&&this.playerClasses.length>0&&(l=!1,this.playerClasses.forEach(function(s,t,r){e.class.indexOf(s)!==-1&&(l=!0)}));var s=!0;void 0!==this.spellLevels&&this.spellLevels.length>0&&(s=!1,this.spellLevels.forEach(function(l,t,r){e.level===parseInt(l)&&(s=!0)}));var t=!0;void 0!==this.spellSchools&&this.spellSchools.length>0&&(t=!1,this.spellSchools.forEach(function(l,s,r){e.school===l&&(t=!0)}));var r=!0;return void 0!==this.spellName&&this.spellName.length>0&&(r=e.name.toLowerCase().indexOf(this.spellName.toLowerCase())>=0),l&&s&&t&&r},sortSpells:function(e,l){return e.name.localeCompare(l.name)},toggleDrawer:function(){this.fire("drawerToggle",{})},toggleSearch:function(){this.querySelector("iron-collapse").toggle()}});</script>
</dom-module></body></html>