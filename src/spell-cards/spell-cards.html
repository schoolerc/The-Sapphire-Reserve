<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/iron-input/iron-input.html">
<link rel="import" href="../../bower_components/iron-form/iron-form.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<dom-module id="spell-cards">
    <template>
        <style>
            :host {
                display: block;
            }

            h5 {
                margin-top: 5px;
                margin-bottom: 15px;
            }

            h3 {
                margin-bottom: 0;
            }
            paper-item{
                margin-top:10px;
            }
        </style>
        <iron-ajax url="/spells.json" handle-as="json" last-response="{{data}}" auto></iron-ajax>
        <paper-input></paper-input>
        <paper-dropdown-menu label="Class">
            <paper-listbox multi class="dropdown-content">
                <paper-item>Bard</paper-item>
                <paper-item>Cleric</paper-item>
                <paper-item>Druid</paper-item>
                <paper-item>Paladin</paper-item>
                <paper-item>Ranger</paper-item>
                <paper-item>Sorcerer</paper-item>
                <paper-item>Warlock</paper-item>
                <paper-item>Wizard</paper-item>
            </paper-listbox>
        </paper-dropdown-menu>
        <paper-dropdown-menu label="School">
            <paper-listbox multi class="dropdown-content">
                <paper-item>Abjuration</paper-item>
                <paper-item>Conjuration</paper-item>
                <paper-item>Divination</paper-item>
                <paper-item>Enchantment</paper-item>
                <paper-item>Evocation</paper-item>
                <paper-item>Illusion</paper-item>
                <paper-item>Necromancy</paper-item>
                <paper-item>Transmutation</paper-item>
            </paper-listbox>
        </paper-dropdown-menu>
        <paper-dropdown-menu label="Level">
            <paper-listbox multi class="dropdown-content">
                <paper-item>Cantrip</paper-item>
                <paper-item>1st-level</paper-item>
                <paper-item>2nd-level</paper-item>
                <paper-item>3rd-level</paper-item>
                <paper-item>4th-level</paper-item>
                <paper-item>5th-level</paper-item>
                <paper-item>6th-level</paper-item>
                <paper-item>7th-level</paper-item>
                <paper-item>8th-level</paper-item>
                <paper-item>9th-level</paper-item>
            </paper-listbox>
        </paper-dropdown-menu>
        <template is="dom-repeat" items="{{data}}" as="spell" id="spell-list">
            <paper-material elevation="1">
                <paper-item>
                    <paper-item-body two-line>
                        <div>
                            <h3>[[spell.name]]</h3>
                            <h5>[[spellLevelSchoolDescription(spell)]]</h5>
                            <div><b>Casting Time: </b>[[spell.casting_time]]</div>
                            <div><b>Range: </b>[[spell.range]]</div>
                            <div><b>Components: </b>[[spell.components]]</div>
                            <div><b>Duration: </b>[[spell.duration]]</div>
                        </div>
                        <div secondary inner-h-t-m-l="{{spell.desc}}"></div>
                    </paper-item-body>
                </paper-item>
            </paper-material>
        </template>
    </template>

    <script>
        Polymer({
            is: 'spell-cards',
            properties: {},
            spellLevelSchoolDescription: function (spell) {
                if (spell.level == 0) {
                    return spell.school + " Cantrip";
                }
                else if (spell.level == 1) {
                    return "1st-level " + spell.school;
                }
                else if (spell.level == 2) {
                    return "2nd-level " + spell.school;
                }
                else if (spell.level == 3) {
                    return "3rd-level " + spell.school;
                }
                else {
                    return spell.level + "th-level " + spell.school;
                }
            }
        });
    </script>
</dom-module>